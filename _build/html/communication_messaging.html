

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Communication &amp; Messaging &mdash; Anello Developer Manual  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/my_theme.css?v=547657ed" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=888ff710"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Mechanicals" href="mechanicals.html" />
    <link rel="prev" title="Vehicle Configuration" href="vehicle_configuration.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Anello Developer Manual
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">ANELLO Developer Manual</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting_started_quick.html">EVK Getting Started Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started_gnssins.html">GNSS INS Getting Started Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started_imu.html">IMU &amp; IMU+ Getting Started Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started_x3.html">X3 Getting Started Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_tool.html">ANELLO Python Tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup_troubleshooting.html">Python Tool Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="unit_configuration.html">Unit Configurations</a></li>
<li class="toctree-l1"><a class="reference internal" href="vehicle_configuration.html">Vehicle Configuration</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Communication &amp; Messaging</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#interfacing">1  Interfacing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#serial-communication-parameters">1.1 Serial Communication Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#port-definitions">1.2 Port Definitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#time-synchronization">1.3 Time Synchronization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#external-sync-pulse">1.3.1 External Sync Pulse</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pps-synchronization">1.3.2 PPS Synchronization</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ascii-data-output-messages">2  ASCII Data Output Messages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#apimu-message-evk-gnss-ins">2.1.1 APIMU Message (EVK &amp; GNSS INS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#apimu-message-x3">2.1.2 APIMU Message (X3)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#apim1-message-imu-imu">2.1.3 APIM1 Message (IMU &amp; IMU+)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#apgps-message">2.2 APGPS Message</a></li>
<li class="toctree-l3"><a class="reference internal" href="#aphdg-message">2.3 APHDG Message</a></li>
<li class="toctree-l3"><a class="reference internal" href="#apins-message">2.4 APINS Message</a></li>
<li class="toctree-l3"><a class="reference internal" href="#apahrs-message">2.5 APAHRS Message</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#rtcm-binary-data-output-messages">3  RTCM Binary Data Output Messages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#imu-message-evk-gnss-ins">3.1.1 IMU Message (EVK &amp; GNSS INS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#imu-message-x3">3.1.2 IMU Message (X3)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#imu-message-imu-imu">3.1.3 IMU Message (IMU &amp; IMU+)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gps-pvt-message-evk-gnss-ins">3.3 GPS PVT Message (EVK/GNSS INS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hdg-message-evk-gnss-ins">3.4 HDG Message (EVK/GNSS INS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ins-message-evk-gnss-ins">3.5 INS Message (EVK/GNSS INS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ahrs-message-imu">3.6 AHRS Message (IMU+)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#input-messages">4  Input Messages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#apcfg-messages">4.1 APCFG Messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="#apveh-messages">4.2 APVEH Messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="#apodo-message">4.3 APODO Message</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rtcm-data-input">4.4 RTCM Data Input</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ping-command">4.5 Ping Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="#echo-command">4.6 Echo Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reset-command">4.7 Reset Command</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#error-messages">5  Error Messages</a></li>
<li class="toctree-l2"><a class="reference internal" href="#checksum">6  Checksum</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ascii-checksum">6.1 Ascii Checksum</a></li>
<li class="toctree-l3"><a class="reference internal" href="#binary-checksum">6.2 Binary Checksum</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="mechanicals.html">Mechanicals</a></li>
<li class="toctree-l1"><a class="reference internal" href="drive_testing.html">Drive Testing Best Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="fw_upgrade.html">Firmware Upgrade</a></li>
<li class="toctree-l1"><a class="reference internal" href="software_tools.html">Software Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="known_limitations.html">Known Issues and Limitations</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Anello Developer Manual</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Communication &amp; Messaging</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/communication_messaging.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="communication-messaging">
<h1>Communication &amp; Messaging<a class="headerlink" href="#communication-messaging" title="Link to this heading"></a></h1>
<section id="interfacing">
<h2>1  Interfacing<a class="headerlink" href="#interfacing" title="Link to this heading"></a></h2>
<p>The communication interfaces currently supported for the ANELLO products are listed below:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>ANELLO EVK: Serial (USB C), UDP (Ethernet)</p></li>
<li><p>ANELLO GNSS INS: Serial (RS-232), UDP (Automotive Ethernet)</p></li>
<li><p>ANELLO IMU/IMU+: Serial (RS-232)</p></li>
<li><p>ANELLO X3: Serial (RS-422), UART (3.3V)</p></li>
</ol>
</div></blockquote>
<section id="serial-communication-parameters">
<h3>1.1 Serial Communication Parameters<a class="headerlink" href="#serial-communication-parameters" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>Default Baud Rate:</dt><dd><ul class="simple">
<li><p>EVK: 921600</p></li>
<li><p>GNSS INS and IMU/IMU+: 230400</p></li>
<li><p>X3: 460800</p></li>
</ul>
</dd>
<dt>RS-232 Voltage Levels:</dt><dd><ul class="simple">
<li><p>+/- 7V</p></li>
</ul>
</dd>
<dt>Data Format:</dt><dd><ul class="simple">
<li><p>Data Bits: 8</p></li>
<li><p>Stop Bits: 1</p></li>
<li><p>Parity: None</p></li>
</ul>
</dd>
</dl>
</section>
<section id="port-definitions">
<h3>1.2 Port Definitions<a class="headerlink" href="#port-definitions" title="Link to this heading"></a></h3>
<p>For all interfaces, there are two main port types.</p>
<ol class="arabic simple">
<li><p>The data port is where the main ANELLO output messages are transmitted, and also serves as the input port for the RTCM correction stream.</p></li>
<li><p>The configuration port is used for inputting configuration messaging, inputting odometer messages, and outputting NMEA messages (firmware v1.2 and later).</p></li>
</ol>
<p>For UDP interface, there is a third “odometer” port, which is strictly used to send odometer messages.
This option can be used to feed in odometer data if using ANELLO Python Program to record data over serial,
in order to keep the serial configuration port free.</p>
<blockquote>
<div><table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><strong>Logical Port</strong></p></td>
<td><p><strong>Physical Port</strong></p></td>
<td><p><strong>Functions</strong></p></td>
</tr>
<tr class="row-even"><td rowspan="2"><p>Data Port</p></td>
<td><p>Lowest serial port #, e.g. COM7</p></td>
<td rowspan="2"><p>Output: Data Messages</p>
<p>Input: RTCM Data</p>
</td>
</tr>
<tr class="row-odd"><td><p>UDP: EVK port 1, computer port selectable</p></td>
</tr>
<tr class="row-even"><td rowspan="2"><p>Configuration Port</p></td>
<td><p>Highest serial port #, e.g. COM10</p></td>
<td rowspan="2"><p>Output: NMEA Messages (if configured)</p>
<p>Input: Odometer Data, Configuration</p>
</td>
</tr>
<tr class="row-odd"><td><p>UDP: EVK port 2, computer port selectable</p></td>
</tr>
<tr class="row-even"><td><p>Odometer Port</p></td>
<td><p>UDP: EVK port 3, computer port selectable</p></td>
<td><p>Odometer Channel (UDP Only)</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>UDP communication uses fixed port numbers on the EVK but selectable ports on the external device.
These ports, along with IP addresses and other UDP settings should be configured (see <a class="reference external" href="https://docs-a1.readthedocs.io/en/latest/unit_configuration.html">Unit Configurations</a>).</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>The “lowest” and “highest” serial ports mentioned above refer to the EVK, which uses an FTDI chip to create 4 virtual COM ports.
The GNSS INS and IMU/IMU+ have two RS-232 connections, where RS232-1 is the configuration port and RS232-2 is the data port.
The port numbers that appear once connected to the computer are determined by how the OS assigns the ports, and therefore the
Data port is not necessarily the lowest port # like in the EVK.</p>
</div>
</div></blockquote>
</section>
<section id="time-synchronization">
<h3>1.3 Time Synchronization<a class="headerlink" href="#time-synchronization" title="Link to this heading"></a></h3>
<section id="external-sync-pulse">
<h4>1.3.1 External Sync Pulse<a class="headerlink" href="#external-sync-pulse" title="Link to this heading"></a></h4>
<p>All ANELLO products include the option for time synchronization via an external sync pulse, e.g. from external PPS signal.
To enable external synchronization, the “Sync Pulse Enable” <a class="reference external" href="https://docs-a1.readthedocs.io/en/latest/unit_configuration.html">Unit Configuration</a> must be enabled.
Enabling the sync configuration requires the unit to be reset or repowered as the interrupt is set up during MCU initialization.
When “Sync Pulse Enable” is on, the rising edge of the sync pulse is detected by an interrupt and time-tagged in the IMU message “T_Sync” field.</p>
<p>The sync pulse input can be sent up to 100 Hz with a pulse width of at least 5 ms.
A voltage level of 3.3 V is standard, but voltages from 1.5 to 5 V are also supported.
See <a class="reference external" href="https://docs-a1.readthedocs.io/en/latest/mechanicals.html#anello-evk">Mechanicals</a> to find the sync input pin for each product.</p>
</section>
<section id="pps-synchronization">
<h4>1.3.2 PPS Synchronization<a class="headerlink" href="#pps-synchronization" title="Link to this heading"></a></h4>
<p>For the ANELLO GNSS INS and EVK products which contain an internal GNSS receiver, a PPS output pulse is also supplied for time synchronization.
PPS is output directly from the GNSS receiver, which will continue outputting a PPS pulse even if a GPS time fix is lost.
Note that the PPS accuracy will degrade with time, with drifts around 1 us per second without GPS.
See <a class="reference external" href="https://docs-a1.readthedocs.io/en/latest/mechanicals.html#anello-evk">Mechanicals</a> to find the PPS output pin for each product.</p>
<p>The PPS rising edge is also detected by an interrupt in the firmware. At the time of the interrupt, the MCU time is recorded by the firmware.
The MCU time of the PPS interrupt is placed into the APINS message.</p>
</section>
</section>
</section>
<section id="ascii-data-output-messages">
<h2>2  ASCII Data Output Messages<a class="headerlink" href="#ascii-data-output-messages" title="Link to this heading"></a></h2>
<p>ANELLO has two message formats, ASCII and RTCM. The structures of all ASCII messages use the
following conventions:</p>
<ul class="simple">
<li><p>The lead code identifier for each record is ‘#’</p></li>
<li><p>All data fields are delimited by a comma</p></li>
<li><p>Each log ends with a hexadecimal checksum preceded by an asterisk and followed by a line termination using the carriage return and line feed characters</p></li>
<li><p>The checksum is an XOR of all the bytes between # and *, written in hexadecimal (letters must be uppercase)</p></li>
<li><p>APIMU messages are transmitted at the output data rate (ODR) setting</p></li>
<li><p>APINS messages are transmitted at 100 Hz</p></li>
<li><p>APGPS messages are transmitted at 4 Hz</p></li>
</ul>
<section id="apimu-message-evk-gnss-ins">
<h3>2.1.1 APIMU Message (EVK &amp; GNSS INS)<a class="headerlink" href="#apimu-message-evk-gnss-ins" title="Link to this heading"></a></h3>
<p>The APIMU message is the IMU output message for EVK and GNSS INS units only.</p>
<blockquote>
<div><table class="docutils align-default">
<tbody>
<tr class="row-odd"><td></td>
<td><p>Field</p></td>
<td><p>Units</p></td>
<td><p>Description</p></td>
</tr>
<tr class="row-even"><td><p>0</p></td>
<td><p>APIMU</p></td>
<td></td>
<td><p>Sentence identifier</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>Time</p></td>
<td><p>ms</p></td>
<td><p>Time since power on</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>T_Sync</p></td>
<td><p>ms</p></td>
<td><p>Time at last sync rising edge (zero when sync config disabled)</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>AX</p></td>
<td><p>g</p></td>
<td><p>X-Axis Acceleration</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>AY</p></td>
<td><p>g</p></td>
<td><p>Y-Axis Acceleration</p></td>
</tr>
<tr class="row-odd"><td><p>5</p></td>
<td><p>AZ</p></td>
<td><p>g</p></td>
<td><p>Z-Axis Acceleration</p></td>
</tr>
<tr class="row-even"><td><p>6</p></td>
<td><p>WX</p></td>
<td><p>deg/s</p></td>
<td><p>X-Axis Angular Rate (MEMS)</p></td>
</tr>
<tr class="row-odd"><td><p>7</p></td>
<td><p>WY</p></td>
<td><p>deg/s</p></td>
<td><p>Y-Axis Angular Rate (MEMS)</p></td>
</tr>
<tr class="row-even"><td><p>8</p></td>
<td><p>WZ</p></td>
<td><p>deg/s</p></td>
<td><p>Z-Axis Angular Rate (MEMS)</p></td>
</tr>
<tr class="row-odd"><td><p>9</p></td>
<td><p>OG_WZ</p></td>
<td><p>deg/s</p></td>
<td><p>High Precicision Z-Axis Angular Rate (ANELLO Optical Gyro)</p></td>
</tr>
<tr class="row-even"><td><p>10</p></td>
<td><p>ODO</p></td>
<td><p>m/s</p></td>
<td><p>Scaled Composite Odometer Value</p></td>
</tr>
<tr class="row-odd"><td><p>11</p></td>
<td><p>ODO Time</p></td>
<td><p>ms</p></td>
<td><p>Timestamp of Odometer Reading</p></td>
</tr>
<tr class="row-even"><td><p>12</p></td>
<td><p>Temp</p></td>
<td><p>°C</p></td>
<td><p>Temperature</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Firmware before v1.0.39 does not have T_Sync field.</p>
</div>
</section>
<section id="apimu-message-x3">
<h3>2.1.2 APIMU Message (X3)<a class="headerlink" href="#apimu-message-x3" title="Link to this heading"></a></h3>
<dl>
<dt>This is the same as APIMU but with additional Optical Gyro Rates for 3 axes, magnetic field measurements, and without odometer values. This is the output message for X3 units only.</dt><dd><table class="docutils align-default">
<tbody>
<tr class="row-odd"><td></td>
<td><p>Field</p></td>
<td><p>Units</p></td>
<td><p>Description</p></td>
</tr>
<tr class="row-even"><td><p>0</p></td>
<td><p>APIMU</p></td>
<td></td>
<td><p>Sentence identifier</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>Time</p></td>
<td><p>ms</p></td>
<td><p>Time since power on</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>T_Sync</p></td>
<td><p>ms</p></td>
<td><p>Time at last sync rising edge (zero when sync config disabled)</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>AX</p></td>
<td><p>g</p></td>
<td><p>X-Axis Acceleration</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>AY</p></td>
<td><p>g</p></td>
<td><p>Y-Axis Acceleration</p></td>
</tr>
<tr class="row-odd"><td><p>5</p></td>
<td><p>AZ</p></td>
<td><p>g</p></td>
<td><p>Z-Axis Acceleration</p></td>
</tr>
<tr class="row-even"><td><p>6</p></td>
<td><p>WX</p></td>
<td><p>deg/s</p></td>
<td><p>X-Axis Angular Rate (MEMS)</p></td>
</tr>
<tr class="row-odd"><td><p>7</p></td>
<td><p>WY</p></td>
<td><p>deg/s</p></td>
<td><p>Y-Axis Angular Rate (MEMS)</p></td>
</tr>
<tr class="row-even"><td><p>8</p></td>
<td><p>WZ</p></td>
<td><p>deg/s</p></td>
<td><p>Z-Axis Angular Rate (MEMS)</p></td>
</tr>
<tr class="row-odd"><td><p>9</p></td>
<td><p>OG_WX</p></td>
<td><p>deg/s</p></td>
<td><p>High Precicision X-Axis Angular Rate (ANELLO Optical Gyro)</p></td>
</tr>
<tr class="row-even"><td><p>10</p></td>
<td><p>OG_WY</p></td>
<td><p>deg/s</p></td>
<td><p>High Precicision Y-Axis Angular Rate (ANELLO Optical Gyro)</p></td>
</tr>
<tr class="row-odd"><td><p>11</p></td>
<td><p>OG_WZ</p></td>
<td><p>deg/s</p></td>
<td><p>High Precicision Z-Axis Angular Rate (ANELLO Optical Gyro)</p></td>
</tr>
<tr class="row-even"><td><p>12</p></td>
<td><p>MAG_X</p></td>
<td><p>g</p></td>
<td><p>X-Axis Magnetic Field Measurement</p></td>
</tr>
<tr class="row-odd"><td><p>13</p></td>
<td><p>MAG_Y</p></td>
<td><p>g</p></td>
<td><p>X-Axis Magnetic Field Measurement</p></td>
</tr>
<tr class="row-even"><td><p>14</p></td>
<td><p>MAG_Z</p></td>
<td><p>g</p></td>
<td><p>X-Axis Magnetic Field Measurement</p></td>
</tr>
<tr class="row-odd"><td><p>15</p></td>
<td><p>Temp C</p></td>
<td><p>°C</p></td>
<td><p>Temperature</p></td>
</tr>
<tr class="row-even"><td><p>16</p></td>
<td><p>Status_X</p></td>
<td><p>Bitfield</p></td>
<td><p>Status based on bits:
- Bit 0: Gyro discrepency
- Bit 1: Temperature uncontrolled
- Bit 2: Over current error
- Bit 3: SiPhOG supply voltage bad</p></td>
</tr>
<tr class="row-odd"><td><p>17</p></td>
<td><p>Status_Y</p></td>
<td><p>Bitfield</p></td>
<td><p>Status based on bits:
- Bit 0: Gyro discrepency
- Bit 1: Temperature uncontrolled
- Bit 2: Over current error
- Bit 3: SiPhOG supply voltage bad</p></td>
</tr>
<tr class="row-even"><td><p>18</p></td>
<td><p>Status_Z</p></td>
<td><p>Bitfield</p></td>
<td><p>Status based on bits:
- Bit 0: Gyro discrepency
- Bit 1: Temperature uncontrolled
- Bit 2: Over current error
- Bit 3: SiPhOG supply voltage bad</p></td>
</tr>
</tbody>
</table>
</dd>
</dl>
</section>
<section id="apim1-message-imu-imu">
<h3>2.1.3 APIM1 Message (IMU &amp; IMU+)<a class="headerlink" href="#apim1-message-imu-imu" title="Link to this heading"></a></h3>
<p>The APIM1 message is the same as APIMU but without odometer values. This is the output message for IMU and IMU+ units only.</p>
<blockquote>
<div><table class="docutils align-default">
<tbody>
<tr class="row-odd"><td></td>
<td><p>Field</p></td>
<td><p>Units</p></td>
<td><p>Description</p></td>
</tr>
<tr class="row-even"><td><p>0</p></td>
<td><p>APIMU</p></td>
<td></td>
<td><p>Sentence identifier</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>Time</p></td>
<td><p>ms</p></td>
<td><p>Time since power on</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>T_Sync</p></td>
<td><p>ms</p></td>
<td><p>Time at last sync rising edge (zero when sync config disabled)</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>AX</p></td>
<td><p>g</p></td>
<td><p>X-Axis Acceleration</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>AY</p></td>
<td><p>g</p></td>
<td><p>Y-Axis Acceleration</p></td>
</tr>
<tr class="row-odd"><td><p>5</p></td>
<td><p>AZ</p></td>
<td><p>g</p></td>
<td><p>Z-Axis Acceleration</p></td>
</tr>
<tr class="row-even"><td><p>6</p></td>
<td><p>WX</p></td>
<td><p>deg/s</p></td>
<td><p>X-Axis Angular Rate (MEMS)</p></td>
</tr>
<tr class="row-odd"><td><p>7</p></td>
<td><p>WY</p></td>
<td><p>deg/s</p></td>
<td><p>Y-Axis Angular Rate (MEMS)</p></td>
</tr>
<tr class="row-even"><td><p>8</p></td>
<td><p>WZ</p></td>
<td><p>deg/s</p></td>
<td><p>Z-Axis Angular Rate (MEMS)</p></td>
</tr>
<tr class="row-odd"><td><p>9</p></td>
<td><p>OG_WZ</p></td>
<td><p>deg/s</p></td>
<td><p>High Precicision Z-Axis Angular Rate (ANELLO Optical Gyro)</p></td>
</tr>
<tr class="row-even"><td><p>12</p></td>
<td><p>Temp C</p></td>
<td><p>°C</p></td>
<td><p>Temperature</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Firmware before v1.0.39 does not have T_Sync field.</p>
</div>
</section>
<section id="apgps-message">
<h3>2.2 APGPS Message<a class="headerlink" href="#apgps-message" title="Link to this heading"></a></h3>
<p>The APGPS message is the PVT output from the EVK and GNSS INS units only.</p>
<blockquote>
<div><table class="docutils align-default">
<tbody>
<tr class="row-odd"><td></td>
<td><p>Field</p></td>
<td><p>Units</p></td>
<td><p>Description</p></td>
</tr>
<tr class="row-even"><td><p>0</p></td>
<td><p>APGPS</p></td>
<td></td>
<td><p>Sentence identifier</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>Time</p></td>
<td><p>ms</p></td>
<td><p>Time since power on</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>GPS Time</p></td>
<td><p>ns</p></td>
<td><p>GPS Time in integer ns</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>Lat</p></td>
<td><p>deg</p></td>
<td><p>Latitude, ‘+’: north, ‘-’: south</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>Long</p></td>
<td><p>deg</p></td>
<td><p>Longitude, ‘+’: east, ‘-’: west</p></td>
</tr>
<tr class="row-odd"><td><p>5</p></td>
<td><p>Alt ellipsoid</p></td>
<td><p>m</p></td>
<td><p>Height above ellipsoid</p></td>
</tr>
<tr class="row-even"><td><p>6</p></td>
<td><p>Alt msl</p></td>
<td><p>m</p></td>
<td><p>Height above mean sea level</p></td>
</tr>
<tr class="row-odd"><td><p>7</p></td>
<td><p>Speed</p></td>
<td><p>m/s</p></td>
<td><p>GNSS Speed</p></td>
</tr>
<tr class="row-even"><td><p>8</p></td>
<td><p>Heading</p></td>
<td><p>deg</p></td>
<td><p>GNSS Heading (ground track)</p></td>
</tr>
<tr class="row-odd"><td><p>9</p></td>
<td><p>Hacc</p></td>
<td><p>m</p></td>
<td><p>Horizontal Accuracy</p></td>
</tr>
<tr class="row-even"><td><p>10</p></td>
<td><p>Vacc</p></td>
<td><p>m</p></td>
<td><p>Vertical Accuracy</p></td>
</tr>
<tr class="row-odd"><td><p>11</p></td>
<td><p>PDOP</p></td>
<td></td>
<td><p>Position dilution of precision</p></td>
</tr>
<tr class="row-even"><td><p>12</p></td>
<td><p>FixType</p></td>
<td></td>
<td><p>0: No Fix, 2: 2D Fix, 3: 3D Fix, 5: Time Only</p></td>
</tr>
<tr class="row-odd"><td><p>13</p></td>
<td><p>SatNum</p></td>
<td></td>
<td><p>Number of satellites used in solution</p></td>
</tr>
<tr class="row-even"><td><p>14</p></td>
<td><p>Speed Acc</p></td>
<td></td>
<td><p>Accuracy of GNSS Speed measurement</p></td>
</tr>
<tr class="row-odd"><td><p>15</p></td>
<td><p>Hdg Acc</p></td>
<td></td>
<td><p>Accuracy of GNSS Heading measurement</p></td>
</tr>
<tr class="row-even"><td><p>16</p></td>
<td><p>RTK Status</p></td>
<td></td>
<td><p>0: Single Point Positioning, 1: RTK Float, 2: RTK Fixed</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This packet should be used to correlate GPS time and system time. The packet is time stamped at the time the PPS signal is generated by the GNSS receiver.</p>
</div>
</section>
<section id="aphdg-message">
<h3>2.3 APHDG Message<a class="headerlink" href="#aphdg-message" title="Link to this heading"></a></h3>
<p>The APHDG message contains dual heading information from the dual GNSS receivers if both ANT1 and ANT2 are connected.
This message is output from the EVK and GNSS INS units only.</p>
<blockquote>
<div><table class="docutils align-default">
<tbody>
<tr class="row-odd"><td></td>
<td><p>Field</p></td>
<td><p>Units</p></td>
<td><p>Description</p></td>
</tr>
<tr class="row-even"><td><p>0</p></td>
<td><p>APHDG</p></td>
<td></td>
<td><p>Sentence identifier</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>Time</p></td>
<td><p>ms</p></td>
<td><p>Time since power on</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>GPS Time</p></td>
<td><p>ns</p></td>
<td><p>GPS Time in integer ns (not UTC time)</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>relPosN</p></td>
<td><p>m</p></td>
<td><p>North component of relative position vector</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>relPosE</p></td>
<td><p>m</p></td>
<td><p>East component of relative position vector</p></td>
</tr>
<tr class="row-odd"><td><p>5</p></td>
<td><p>relPosD</p></td>
<td><p>m</p></td>
<td><p>Down component of relative position vector</p></td>
</tr>
<tr class="row-even"><td><p>6</p></td>
<td><p>relPosLength</p></td>
<td><p>m</p></td>
<td><p>Length of relative position vector between antennae</p></td>
</tr>
<tr class="row-odd"><td><p>7</p></td>
<td><p>relPosHeading</p></td>
<td><p>deg</p></td>
<td><p>Heading from primary antenna to secondary antenna</p></td>
</tr>
<tr class="row-even"><td><p>8</p></td>
<td><p>RelPosLength Accuracy</p></td>
<td><p>m</p></td>
<td><p>Accuracy of dual antennae baseline length</p></td>
</tr>
<tr class="row-odd"><td><p>9</p></td>
<td><p>relPosHeading Accuracy</p></td>
<td><p>deg</p></td>
<td><p>Accuracy of dual antennae heading</p></td>
</tr>
<tr class="row-even"><td><p>10</p></td>
<td><p>flags</p></td>
<td></td>
<td><p>Status based on bits:
- Bit 0: gnssFixOK
- Bit 1: diffSoln
- Bit 2: relPosValid
- Bits 4..3: carrSoln
- Bit 5: isMoving
- Bit 6: refPosMiss
- Bit 7: refObsMiss
- Bit 8: relPosHeading Valid
- Bit 9: relPos Normalized</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
<section id="apins-message">
<h3>2.4 APINS Message<a class="headerlink" href="#apins-message" title="Link to this heading"></a></h3>
<p>The APINS message is the Kalman filter position, velocity, and attitude solution output from the EVK and GNSS INS units.</p>
<blockquote>
<div><table class="docutils align-default">
<tbody>
<tr class="row-odd"><td></td>
<td><p>Field</p></td>
<td><p>Units</p></td>
<td><p>Description</p></td>
</tr>
<tr class="row-even"><td><p>0</p></td>
<td><p>APINS</p></td>
<td></td>
<td><p>Sentence identifier</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>Time</p></td>
<td><p>ms</p></td>
<td><p>Time since power on</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>PPS Time</p></td>
<td><p>ns</p></td>
<td><p>Time of last PPS pulse converted to GPS time (time since midnight on Jan 6, 1980)</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>Status</p></td>
<td></td>
<td><p>0: Attitude Only; 1: Position and Attitude; 2: Position, Attitude, and Heading; 3: RTK Float; 4: RTK Fix
If GPS button is turned OFF in Python tool, 8: Attitude Only; 9: Position and Attitude; 10: Position, Attitude, and Heading</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>Lat</p></td>
<td><p>deg</p></td>
<td><p>Latitude, ‘+’: North, ‘-’: South</p></td>
</tr>
<tr class="row-odd"><td><p>5</p></td>
<td><p>Long</p></td>
<td><p>deg</p></td>
<td><p>Longitude, ‘+’: East, ‘-’: West</p></td>
</tr>
<tr class="row-even"><td><p>6</p></td>
<td><p>Height</p></td>
<td><p>m</p></td>
<td><p>Height above ellipsoid</p></td>
</tr>
<tr class="row-odd"><td><p>7</p></td>
<td><p>VN</p></td>
<td><p>m/s</p></td>
<td><p>North Velocity in NED Frame</p></td>
</tr>
<tr class="row-even"><td><p>8</p></td>
<td><p>VE</p></td>
<td><p>m/s</p></td>
<td><p>East Velocity in NED Frame</p></td>
</tr>
<tr class="row-odd"><td><p>9</p></td>
<td><p>VD</p></td>
<td><p>m/s</p></td>
<td><p>Down Velocity in NED Frame</p></td>
</tr>
<tr class="row-even"><td><p>10</p></td>
<td><p>Roll</p></td>
<td><p>deg</p></td>
<td><p>Roll Angle, rotation about body frame X</p></td>
</tr>
<tr class="row-odd"><td><p>11</p></td>
<td><p>Pitch</p></td>
<td><p>deg</p></td>
<td><p>Pitch Angle, rotation about body frame Y</p></td>
</tr>
<tr class="row-even"><td><p>12</p></td>
<td><p>Heading</p></td>
<td><p>deg</p></td>
<td><p>Heading Angle, rotation about body frame Z</p></td>
</tr>
<tr class="row-odd"><td><p>13</p></td>
<td><p>ZUPT</p></td>
<td></td>
<td><p>0: Moving, 1: Stationary</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Roll, pitch and heading angles are calculated as standard aerospace Euler angles in a 3-2-1 (yaw, pitch, roll) body frame rotation.</p>
</div>
</section>
<section id="apahrs-message">
<h3>2.5 APAHRS Message<a class="headerlink" href="#apahrs-message" title="Link to this heading"></a></h3>
<p>The APAHRS message is only available with the ANELLO AHRS upgrade on the IMU+. It provides the roll, pitch and yaw angles calculated as standard aerospace Euler angles in a 3-2-1 (yaw, pitch, roll) body frame rotation.</p>
<blockquote>
<div><table class="docutils align-default">
<tbody>
<tr class="row-odd"><td></td>
<td><p>Field</p></td>
<td><p>Units</p></td>
<td><p>Description</p></td>
</tr>
<tr class="row-even"><td><p>0</p></td>
<td><p>APINS</p></td>
<td></td>
<td><p>Sentence identifier</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>Time</p></td>
<td><p>ms</p></td>
<td><p>Time since power on</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>Sync Time</p></td>
<td><p>ns</p></td>
<td><p>Time of the last sync pulse.</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>Roll</p></td>
<td><p>deg</p></td>
<td><p>Roll in degrees</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>Pitch</p></td>
<td><p>deg</p></td>
<td><p>Pitch in degrees</p></td>
</tr>
<tr class="row-odd"><td><p>5</p></td>
<td><p>Yaw</p></td>
<td><p>deg</p></td>
<td><p>Yaw in degrees</p></td>
</tr>
<tr class="row-even"><td><p>6</p></td>
<td><p>ZUPT Status</p></td>
<td></td>
<td><p>1 if ZUPT is enabled, 0 if ZUPT is disabled</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The yaw is not an absolute heading but an integrated relative heading - unless an absolute heading is provided by the user, after which the optical gyro integrates relative to that absolute heading.</p>
</div>
</section>
</section>
<section id="rtcm-binary-data-output-messages">
<h2>3  RTCM Binary Data Output Messages<a class="headerlink" href="#rtcm-binary-data-output-messages" title="Link to this heading"></a></h2>
<p>The binary packets use an RTCM standard 10403 envelope for each message.</p>
<blockquote>
<div><table class="docutils align-default">
<tbody>
<tr class="row-odd"><td></td>
<td><p>Field</p></td>
<td><p>Value/Description</p></td>
</tr>
<tr class="row-even"><td><p>0</p></td>
<td><p>Preamble</p></td>
<td><p>0xD3</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>Reserved</p></td>
<td><p>000000 (6 bit)</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>Length</p></td>
<td><p>10 bit, # bytes in data message</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>Data</p></td>
<td><p>Data message as defined below</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>CRC</p></td>
<td><p>3 byte</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>The ANELLO Python Tool handles logging and decoding of the RTCM binary format.
However, an <a class="reference external" href="https://github.com/Anello-Photonics/decoder/blob/master/decoder.cpp">RTCM decoder</a> is provided if needed,
with the checksum definition found <a class="reference external" href="https://github.com/Anello-Photonics/decoder/blob/master/artcm/artcm.c">here</a>.</p>
<section id="imu-message-evk-gnss-ins">
<h3>3.1.1 IMU Message (EVK &amp; GNSS INS)<a class="headerlink" href="#imu-message-evk-gnss-ins" title="Link to this heading"></a></h3>
<p>The IMU output message for EVK and GNSS INS units has a subtype ID of 1.</p>
<blockquote>
<div><table class="docutils align-default">
<tbody>
<tr class="row-odd"><td></td>
<td><p>Field</p></td>
<td><p>Type</p></td>
<td><p>Units</p></td>
<td><p>Description</p></td>
</tr>
<tr class="row-even"><td><p>0</p></td>
<td><p>Message #</p></td>
<td><p>uint12</p></td>
<td><p>4058</p></td>
<td><p>ANELLO Photonics custom message number</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>Sub Type ID</p></td>
<td><p>uint4</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>MCU Time</p></td>
<td><p>uint64</p></td>
<td><p>ns</p></td>
<td><p>Time since power on</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>Sync Time</p></td>
<td><p>uint64</p></td>
<td><p>ns</p></td>
<td><p>Timestamp of input sync pulse (if enabled and provided)</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>ODO Time</p></td>
<td><p>uint64</p></td>
<td><p>ns</p></td>
<td><p>Timestamp of odometer reading</p></td>
</tr>
<tr class="row-odd"><td><p>5</p></td>
<td><p>AX</p></td>
<td><p>int32</p></td>
<td><p>1/143165577 g</p></td>
<td><p>X-Axis Acceleration (intended 15g/2^31)</p></td>
</tr>
<tr class="row-even"><td><p>6</p></td>
<td><p>AY</p></td>
<td><p>int32</p></td>
<td><p>1/143165577 g</p></td>
<td><p>Y-Axis Acceleration</p></td>
</tr>
<tr class="row-odd"><td><p>7</p></td>
<td><p>AZ</p></td>
<td><p>int32</p></td>
<td><p>1/143165577 g</p></td>
<td><p>Z-Axis Acceleration</p></td>
</tr>
<tr class="row-even"><td><p>8</p></td>
<td><p>WX</p></td>
<td><p>int32</p></td>
<td><p>1/4772186 deg/s</p></td>
<td><p>X-Axis Angular Rate (MEMS) (intended 450/2^31)</p></td>
</tr>
<tr class="row-odd"><td><p>9</p></td>
<td><p>WY</p></td>
<td><p>int32</p></td>
<td><p>1/4772186 deg/s</p></td>
<td><p>Y-Axis Angular Rate (MEMS)</p></td>
</tr>
<tr class="row-even"><td><p>10</p></td>
<td><p>WZ</p></td>
<td><p>int32</p></td>
<td><p>1/4772186 deg/s</p></td>
<td><p>Z-Axis Angular Rate (MEMS)</p></td>
</tr>
<tr class="row-odd"><td><p>11</p></td>
<td><p>OG_WZ</p></td>
<td><p>int32</p></td>
<td><p>1/4772186 deg/s</p></td>
<td><p>High precision optical gyro z-axis angular rate</p></td>
</tr>
<tr class="row-even"><td><p>12</p></td>
<td><p>ODO</p></td>
<td><p>int16</p></td>
<td><p>0.01 m/s</p></td>
<td><p>Scaled composite odometer value</p></td>
</tr>
<tr class="row-odd"><td><p>13</p></td>
<td><p>Temp C</p></td>
<td><p>int16</p></td>
<td><p>0.01 °C</p></td>
<td><p>Temperature</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
<section id="imu-message-x3">
<h3>3.1.2 IMU Message (X3)<a class="headerlink" href="#imu-message-x3" title="Link to this heading"></a></h3>
<p>The ANELLO binary packets use a 2-byte preamble followed by a 1-byte message type and a 1-byte length. There is also a 2-byte checksum after the payload.</p>
<blockquote>
<div><table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>Preamble</p></td>
<td><p>Message Type</p></td>
<td><p>Length information</p></td>
<td><p>Payload</p></td>
<td><p>Checksum</p></td>
</tr>
<tr class="row-even"><td><p>0xC5 0x50</p></td>
<td><p>IMU = 253</p></td>
<td><p>1-byte</p></td>
<td><p>Message structure defined below</p></td>
<td><p>2-byte</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>The payload for the binary output message is described below</p>
<blockquote>
<div><table class="docutils align-default">
<tbody>
<tr class="row-odd"><td></td>
<td><p>Field</p></td>
<td><p>Type</p></td>
<td><p>Units</p></td>
<td><p>Description</p></td>
</tr>
<tr class="row-even"><td><p>0</p></td>
<td><p>MCU Time</p></td>
<td><p>uint64</p></td>
<td><p>ns</p></td>
<td><p>Time since power on</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>Sync Time</p></td>
<td><p>uint64</p></td>
<td><p>ns</p></td>
<td><p>Timestamp of input sync pulse (if enabled and provided)</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>AX1</p></td>
<td><p>int16</p></td>
<td><p>g=value*(range*0.0000305)</p></td>
<td><p>Scaled sensor accel</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>AY1</p></td>
<td><p>int16</p></td>
<td><p>g=value*(range*0.0000305)</p></td>
<td><p>Scaled sensor accel</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>AZ1</p></td>
<td><p>int16</p></td>
<td><p>g=value*(range*0.0000305)</p></td>
<td><p>Scaled sensor accel</p></td>
</tr>
<tr class="row-odd"><td><p>5</p></td>
<td><p>WX1</p></td>
<td><p>int16</p></td>
<td><p>dps=value*(range*0.000035)</p></td>
<td><p>Scaled sensor rate</p></td>
</tr>
<tr class="row-even"><td><p>6</p></td>
<td><p>WY1</p></td>
<td><p>int16</p></td>
<td><p>dps=value*(range*0.000035)</p></td>
<td><p>Scaled sensor rate</p></td>
</tr>
<tr class="row-odd"><td><p>7</p></td>
<td><p>WZ1</p></td>
<td><p>int16</p></td>
<td><p>dps=value*(range*0.000035)</p></td>
<td><p>Scaled sensor rate</p></td>
</tr>
<tr class="row-even"><td><p>8</p></td>
<td><p>OG_WX</p></td>
<td><p>int32</p></td>
<td><p>dps * 10000000</p></td>
<td><p>Scaled sensor rate for FOG</p></td>
</tr>
<tr class="row-odd"><td><p>9</p></td>
<td><p>OG_WY</p></td>
<td><p>int32</p></td>
<td><p>dps * 10000000</p></td>
<td><p>Scaled sensor rate for FOG</p></td>
</tr>
<tr class="row-even"><td><p>10</p></td>
<td><p>OG_WZ</p></td>
<td><p>int32</p></td>
<td><p>dps * 10000000</p></td>
<td><p>Scaled sensor rate for FOG</p></td>
</tr>
<tr class="row-odd"><td><p>11</p></td>
<td><p>MAG_X</p></td>
<td><p>int16</p></td>
<td><p>g * 4096</p></td>
<td><p>Scaled magnetometer data</p></td>
</tr>
<tr class="row-even"><td><p>12</p></td>
<td><p>MAG_Y</p></td>
<td><p>int16</p></td>
<td><p>g * 4096</p></td>
<td><p>Scaled magnetometer data</p></td>
</tr>
<tr class="row-odd"><td><p>13</p></td>
<td><p>MAG_Z</p></td>
<td><p>int16</p></td>
<td><p>g * 4096</p></td>
<td><p>Scaled magnetometer data</p></td>
</tr>
<tr class="row-even"><td><p>14</p></td>
<td><p>Temperature</p></td>
<td><p>int16</p></td>
<td><p>°C * 100</p></td>
<td><p>Scaled temperature data</p></td>
</tr>
<tr class="row-odd"><td><p>15</p></td>
<td><p>MEMS Range</p></td>
<td><p>uint16</p></td>
<td><p>g and dps</p></td>
<td><p>First 5 bits accel range, next 11 bits rate range</p></td>
</tr>
<tr class="row-even"><td><p>16</p></td>
<td><p>FOG Range</p></td>
<td><p>uint16</p></td>
<td><p>dps</p></td>
<td><p>FOG range in DPS</p></td>
</tr>
<tr class="row-odd"><td><p>17</p></td>
<td><p>Status_X</p></td>
<td><p>Bitfield</p></td>
<td></td>
<td><p>Status based on bits:
- Bit 0: Gyro discrepency
- Bit 1: Temperature uncontrolled
- Bit 2: Over current error
- Bit 3: SiPhOG supply voltage bad</p></td>
</tr>
<tr class="row-even"><td><p>18</p></td>
<td><p>Status_Y</p></td>
<td><p>Bitfield</p></td>
<td></td>
<td><p>Status based on bits:
- Bit 0: Gyro discrepency
- Bit 1: Temperature uncontrolled
- Bit 2: Over current error
- Bit 3: SiPhOG supply voltage bad</p></td>
</tr>
<tr class="row-odd"><td><p>19</p></td>
<td><p>Status_Z</p></td>
<td><p>Bitfield</p></td>
<td></td>
<td><p>Status based on bits:
- Bit 0: Gyro discrepency
- Bit 1: Temperature uncontrolled
- Bit 2: Over current error
- Bit 3: SiPhOG supply voltage bad</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
<section id="imu-message-imu-imu">
<h3>3.1.3 IMU Message (IMU &amp; IMU+)<a class="headerlink" href="#imu-message-imu-imu" title="Link to this heading"></a></h3>
<p>The IMU output message for IMU and IMU+ units has a subtype ID of 6.
It is the same as IMU message for the EVK and GNSS INS but without odometer values.</p>
<blockquote>
<div><table class="docutils align-default">
<tbody>
<tr class="row-odd"><td></td>
<td><p>Field</p></td>
<td><p>Type</p></td>
<td><p>Units</p></td>
<td><p>Description</p></td>
</tr>
<tr class="row-even"><td><p>0</p></td>
<td><p>Message #</p></td>
<td><p>uint12</p></td>
<td><p>4058</p></td>
<td><p>ANELLO Photonics custom message number</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>Sub Type ID</p></td>
<td><p>uint4</p></td>
<td><p>6</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>MCU Time</p></td>
<td><p>uint64</p></td>
<td><p>ns</p></td>
<td><p>Time since power on</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>Sync Time</p></td>
<td><p>uint64</p></td>
<td><p>ns</p></td>
<td><p>Timestamp of input sync pulse (if enabled and provided)</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>AX</p></td>
<td><p>int32</p></td>
<td><p>1/143165577 g</p></td>
<td><p>X-Axis Acceleration (intended 15g/2^31)</p></td>
</tr>
<tr class="row-odd"><td><p>5</p></td>
<td><p>AY</p></td>
<td><p>int32</p></td>
<td><p>1/143165577 g</p></td>
<td><p>Y-Axis Acceleration</p></td>
</tr>
<tr class="row-even"><td><p>6</p></td>
<td><p>AZ</p></td>
<td><p>int32</p></td>
<td><p>1/143165577 g</p></td>
<td><p>Z-Axis Acceleration</p></td>
</tr>
<tr class="row-odd"><td><p>7</p></td>
<td><p>WX</p></td>
<td><p>int32</p></td>
<td><p>1/4772186 deg/s</p></td>
<td><p>X-Axis Angular Rate (MEMS) (intended 450/2^31)</p></td>
</tr>
<tr class="row-even"><td><p>8</p></td>
<td><p>WY</p></td>
<td><p>int32</p></td>
<td><p>1/4772186 deg/s</p></td>
<td><p>Y-Axis Angular Rate (MEMS)</p></td>
</tr>
<tr class="row-odd"><td><p>9</p></td>
<td><p>WZ</p></td>
<td><p>int32</p></td>
<td><p>1/4772186 deg/s</p></td>
<td><p>Z-Axis Angular Rate (MEMS)</p></td>
</tr>
<tr class="row-even"><td><p>10</p></td>
<td><p>OG_WZ</p></td>
<td><p>int32</p></td>
<td><p>1/4772186 deg/s</p></td>
<td><p>High precision optical gyro z-axis angular rate</p></td>
</tr>
<tr class="row-odd"><td><p>11</p></td>
<td><p>Temp C</p></td>
<td><p>int16</p></td>
<td><p>0.01 °C</p></td>
<td><p>Temperature</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
<section id="gps-pvt-message-evk-gnss-ins">
<h3>3.3 GPS PVT Message (EVK/GNSS INS)<a class="headerlink" href="#gps-pvt-message-evk-gnss-ins" title="Link to this heading"></a></h3>
<p>The GPS message is the PVT output from the EVK and GNSS INS units only.
The Antenna ID field indicates which receiver (that connected to ANT1 or ANT2) produced the position information.</p>
<blockquote>
<div><table class="docutils align-default">
<tbody>
<tr class="row-odd"><td></td>
<td><p>Field</p></td>
<td><p>Type</p></td>
<td><p>Units</p></td>
<td><p>Description</p></td>
</tr>
<tr class="row-even"><td><p>0</p></td>
<td><p>Message #</p></td>
<td><p>uint12</p></td>
<td><p>4058</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>Sub Type ID</p></td>
<td><p>uint4</p></td>
<td><p>2</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>Time</p></td>
<td><p>uint64</p></td>
<td><p>ns</p></td>
<td><p>Time since power on</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>GPS Time</p></td>
<td><p>uint64</p></td>
<td><p>ns</p></td>
<td><p>GPS time (GTOW) – Time since Jan 6, 1980</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>Latitude</p></td>
<td><p>int32</p></td>
<td><p>1e-7 deg</p></td>
<td><p>Latitude, ‘+’: north, ‘-’: south</p></td>
</tr>
<tr class="row-odd"><td><p>5</p></td>
<td><p>Longitude</p></td>
<td><p>int32</p></td>
<td><p>1e-7 deg</p></td>
<td><p>Longitude, ‘+’: east, ‘-’: west</p></td>
</tr>
<tr class="row-even"><td><p>6</p></td>
<td><p>Alt ellipsoid</p></td>
<td><p>int32</p></td>
<td><p>0.001 m</p></td>
<td><p>Height above ellipsoid</p></td>
</tr>
<tr class="row-odd"><td><p>7</p></td>
<td><p>Alt msl</p></td>
<td><p>int32</p></td>
<td><p>0.001 m</p></td>
<td><p>Height above mean sea level</p></td>
</tr>
<tr class="row-even"><td><p>8</p></td>
<td><p>Speed</p></td>
<td><p>int32</p></td>
<td><p>0.001 m/s</p></td>
<td><p>Speed</p></td>
</tr>
<tr class="row-odd"><td><p>9</p></td>
<td><p>Heading</p></td>
<td><p>int32</p></td>
<td><p>0.001 deg</p></td>
<td><p>GNSS Heading (ground track)</p></td>
</tr>
<tr class="row-even"><td><p>10</p></td>
<td><p>Hacc</p></td>
<td><p>uint32</p></td>
<td><p>0.001 m</p></td>
<td><p>Horizontal accuracy</p></td>
</tr>
<tr class="row-odd"><td><p>11</p></td>
<td><p>Vacc</p></td>
<td><p>uint32</p></td>
<td><p>0.001 m</p></td>
<td><p>Vertical accuracy</p></td>
</tr>
<tr class="row-even"><td><p>12</p></td>
<td><p>Hdg acc</p></td>
<td><p>uint32</p></td>
<td><p>1e-5 deg</p></td>
<td><p>Heading accuracy</p></td>
</tr>
<tr class="row-odd"><td><p>13</p></td>
<td><p>Speed acc</p></td>
<td><p>uint32</p></td>
<td><p>0.001 m/s</p></td>
<td><p>Speed accuracy</p></td>
</tr>
<tr class="row-even"><td><p>14</p></td>
<td><p>PDOP</p></td>
<td><p>uint16</p></td>
<td><p>0.01</p></td>
<td><p>Position dilution of precision</p></td>
</tr>
<tr class="row-odd"><td><p>15</p></td>
<td><p>FixType</p></td>
<td><p>uint8</p></td>
<td></td>
<td><p>0: No Fix, 2: 2D Fix, 3: 3D Fix, 5: Time Only</p></td>
</tr>
<tr class="row-even"><td><p>16</p></td>
<td><p>SatNum</p></td>
<td><p>uint8</p></td>
<td></td>
<td><p>Number of Satellites used in solution</p></td>
</tr>
<tr class="row-odd"><td><p>17</p></td>
<td><p>RTK Status</p></td>
<td><p>uint8</p></td>
<td></td>
<td><p>0: Single Point Positioning, 1: RTK Float, 2: RTK Fixed</p></td>
</tr>
<tr class="row-even"><td><p>18</p></td>
<td><p>Antenna ID</p></td>
<td><p>uint8</p></td>
<td></td>
<td><p>Primary or secondary antenna</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
<section id="hdg-message-evk-gnss-ins">
<h3>3.4 HDG Message (EVK/GNSS INS)<a class="headerlink" href="#hdg-message-evk-gnss-ins" title="Link to this heading"></a></h3>
<p>The HDG message contains dual heading information from the dual GNSS receivers if both ANT1 and ANT2 are connected.
This message is output from the EVK and GNSS INS units only.</p>
<blockquote>
<div><table class="docutils align-default">
<tbody>
<tr class="row-odd"><td></td>
<td><p>Field</p></td>
<td><p>Type</p></td>
<td><p>Units</p></td>
<td><p>Description</p></td>
</tr>
<tr class="row-even"><td><p>0</p></td>
<td><p>Message #</p></td>
<td><p>uint12</p></td>
<td><p>4058</p></td>
<td><p>ANELLO Photonics custom message number</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>Sub Type ID</p></td>
<td><p>uint4</p></td>
<td><p>3</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>MCU Time</p></td>
<td><p>uint64</p></td>
<td><p>ns</p></td>
<td><p>Time since power on</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>GPS Time</p></td>
<td><p>uint64</p></td>
<td><p>ns</p></td>
<td><p>GPS time (GTOW) – Time since Jan 6, 1980</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>relPosN</p></td>
<td><p>int32</p></td>
<td><p>0.01 m</p></td>
<td><p>North component of relative position vector</p></td>
</tr>
<tr class="row-odd"><td><p>5</p></td>
<td><p>relPosE</p></td>
<td><p>int32</p></td>
<td><p>0.01 m</p></td>
<td><p>East component of relative position vector</p></td>
</tr>
<tr class="row-even"><td><p>6</p></td>
<td><p>relPosD</p></td>
<td><p>int32</p></td>
<td><p>0.01 m</p></td>
<td><p>Down component of relative position vector</p></td>
</tr>
<tr class="row-odd"><td><p>7</p></td>
<td><p>relPosLength</p></td>
<td><p>int32</p></td>
<td><p>0.01 m</p></td>
<td><p>Length of relative position vector between antennae</p></td>
</tr>
<tr class="row-even"><td><p>8</p></td>
<td><p>relPosHeading</p></td>
<td><p>int32</p></td>
<td><p>1e-5 deg</p></td>
<td><p>Heading from primary antenna to secondary antenna</p></td>
</tr>
<tr class="row-odd"><td><p>9</p></td>
<td><p>relPosLength Accuracy</p></td>
<td><p>uint32</p></td>
<td><p>0.1 mm</p></td>
<td><p>Accuracy of dual antennae baseline length</p></td>
</tr>
<tr class="row-even"><td><p>10</p></td>
<td><p>relPosHeading Accuracy</p></td>
<td><p>uint32</p></td>
<td><p>1e-5 deg</p></td>
<td><p>Accuracy of dual antennae heading</p></td>
</tr>
<tr class="row-odd"><td><p>11</p></td>
<td><p>flags</p></td>
<td><p>uint16_t</p></td>
<td></td>
<td><p>Status based on bits:
- Bit 0: gnssFixOK
- Bit 1: diffSoln
- Bit 2: relPosValid
- Bits 4..3: carrSoln
- Bit 5: isMoving
- Bit 6: refPosMiss
- Bit 7: refObsMiss
- Bit 8: relPosHeading Valid
- Bit 9: relPos Normalized</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
<section id="ins-message-evk-gnss-ins">
<h3>3.5 INS Message (EVK/GNSS INS)<a class="headerlink" href="#ins-message-evk-gnss-ins" title="Link to this heading"></a></h3>
<p>The INS message is the Kalman filter position, velocity, and attitude solution output from the EVK and GNSS INS units.</p>
<blockquote>
<div><table class="docutils align-default">
<tbody>
<tr class="row-odd"><td></td>
<td><p>Field</p></td>
<td><p>Type</p></td>
<td><p>Units</p></td>
<td><p>Description</p></td>
</tr>
<tr class="row-even"><td><p>0</p></td>
<td><p>Message #</p></td>
<td><p>uint12</p></td>
<td><p>4058</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>Sub Type ID</p></td>
<td><p>uint4</p></td>
<td><p>4</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>Time</p></td>
<td><p>uint64</p></td>
<td><p>ns</p></td>
<td><p>Time since power on</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>PPS Time</p></td>
<td><p>uint64</p></td>
<td><p>ns</p></td>
<td><p>Time of last PPS pulse converted to GPS time (time since midnight on Jan 6, 1980)</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>Latitude</p></td>
<td><p>int32</p></td>
<td><p>1e-7 deg</p></td>
<td><p>Latitude, ‘+’: north, ‘-’: south</p></td>
</tr>
<tr class="row-odd"><td><p>5</p></td>
<td><p>Longitude</p></td>
<td><p>int32</p></td>
<td><p>1e-7 deg</p></td>
<td><p>Longitude, ‘+’: east, ‘-’: west</p></td>
</tr>
<tr class="row-even"><td><p>6</p></td>
<td><p>Alt ellipsoid</p></td>
<td><p>int32</p></td>
<td><p>0.001 m</p></td>
<td><p>Height above ellipsoid</p></td>
</tr>
<tr class="row-odd"><td><p>7</p></td>
<td><p>VN</p></td>
<td><p>int32</p></td>
<td><p>0.001 m/s</p></td>
<td><p>North Velocity in NED Frame</p></td>
</tr>
<tr class="row-even"><td><p>8</p></td>
<td><p>VE</p></td>
<td><p>int32</p></td>
<td><p>0.001 m/s</p></td>
<td><p>East Velocity in NED Frame</p></td>
</tr>
<tr class="row-odd"><td><p>9</p></td>
<td><p>VD</p></td>
<td><p>int32</p></td>
<td><p>0.001 m/s</p></td>
<td><p>Down Velocity in NED Frame</p></td>
</tr>
<tr class="row-even"><td><p>10</p></td>
<td><p>Roll</p></td>
<td><p>int32</p></td>
<td><p>1e-5 deg</p></td>
<td><p>Roll Angle, rotation about body frame X</p></td>
</tr>
<tr class="row-odd"><td><p>11</p></td>
<td><p>Pitch</p></td>
<td><p>int32</p></td>
<td><p>1e-5 deg</p></td>
<td><p>Pitch Angle, rotation about body frame Y</p></td>
</tr>
<tr class="row-even"><td><p>12</p></td>
<td><p>Heading</p></td>
<td><p>int32</p></td>
<td><p>1e-5 deg</p></td>
<td><p>Heading Angle, rotation about body frame Z</p></td>
</tr>
<tr class="row-odd"><td><p>13</p></td>
<td><p>ZUPT</p></td>
<td><p>uint8</p></td>
<td></td>
<td><p>0: Moving, 1: Stationary</p></td>
</tr>
<tr class="row-even"><td><p>14</p></td>
<td><p>Status</p></td>
<td><p>uint8</p></td>
<td></td>
<td><p>0: Attitude Only; 1: Position and Attitude; 2: Position, Attitude, and Heading; 3: RTK Float; 4: RTK Fix
If GPS button is turned OFF in Python tool, 8: Attitude Only; 9: Position and Attitude; 10: Position, Attitude, and Heading</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
<section id="ahrs-message-imu">
<h3>3.6 AHRS Message (IMU+)<a class="headerlink" href="#ahrs-message-imu" title="Link to this heading"></a></h3>
<p>The APAHRS message is only available with the ANELLO AHRS upgrade on the IMU+. It provides the roll, pitch and yaw angles calculated as standard aerospace Euler angles in a 3-2-1 (yaw, pitch, roll) body frame rotation.</p>
<blockquote>
<div><table class="docutils align-default">
<tbody>
<tr class="row-odd"><td></td>
<td><p>Field</p></td>
<td><p>Type</p></td>
<td><p>Units</p></td>
<td><p>Description</p></td>
</tr>
<tr class="row-even"><td><p>0</p></td>
<td><p>Message #</p></td>
<td><p>uint12</p></td>
<td><p>4058</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>Sub Type ID</p></td>
<td><p>uint4</p></td>
<td><p>8</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>Time</p></td>
<td><p>uint64</p></td>
<td><p>ns</p></td>
<td><p>Time since power on</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>Sync Time</p></td>
<td><p>uint64</p></td>
<td><p>ns</p></td>
<td><p>Time of last sync pulse.</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>Roll</p></td>
<td><p>int32</p></td>
<td><p>1e-5 deg</p></td>
<td><p>Roll in degrees</p></td>
</tr>
<tr class="row-odd"><td><p>5</p></td>
<td><p>Pitch</p></td>
<td><p>int32</p></td>
<td><p>1e-5 deg</p></td>
<td><p>Pitch in degrees</p></td>
</tr>
<tr class="row-even"><td><p>6</p></td>
<td><p>Yaw</p></td>
<td><p>int32</p></td>
<td><p>1e-5 deg</p></td>
<td><p>Yaw in degrees</p></td>
</tr>
<tr class="row-odd"><td><p>7</p></td>
<td><p>ZUPT Status</p></td>
<td><p>uint8</p></td>
<td><p>1 or 0</p></td>
<td><p>1 if ZUPT is enabled, 0 if ZUPT is disabled</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The yaw is not an absolute heading but an integrated relative heading - unless an absolute heading is provided by the user, after which the optical gyro integrates relative to that absolute heading.</p>
</div>
</section>
</section>
<section id="input-messages">
<h2>4  Input Messages<a class="headerlink" href="#input-messages" title="Link to this heading"></a></h2>
<section id="apcfg-messages">
<h3>4.1 APCFG Messages<a class="headerlink" href="#apcfg-messages" title="Link to this heading"></a></h3>
<p>The easiest way to configure an ANELLO unit is using the <a class="reference external" href="https://docs-a1.readthedocs.io/en/latest/python_tool.html#unit-configurations">ANELLO Python Program</a>,
which saves all changes to non-volatile flash memory.</p>
<p>Alternatively, the unit can be configured using the APCFG message, which allows for both temporary (RAM) and permanent setting (FLASH) of configuration parameters.</p>
<p><strong>#APCFG,&lt;r/w/R/W&gt;,&lt;param1&gt;,&lt;value1&gt;,…,&lt;paramN&gt;,&lt;valueN&gt;*checksum</strong></p>
<blockquote>
<div><table class="docutils align-default">
<tbody>
<tr class="row-odd"><td></td>
<td><p>Field</p></td>
<td><p>Description</p></td>
</tr>
<tr class="row-even"><td><p>0</p></td>
<td><p>APCFG</p></td>
<td><p>Sentence identifier</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>&lt;read/write&gt;</p></td>
<td><p>‘r’: read  RAM, ‘w’: write RAM, ‘R’: read FLASH, ‘W’: write FLASH</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>&lt;param&gt;</p></td>
<td><p>Configuration parameter (APCFG code)</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>&lt;value&gt;</p></td>
<td><p>Configuration value, expressed in ASCII</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>checksum</p></td>
<td><p>XOR of bytes between # and * written in hexadecimal (letters must be uppercase)</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>For more details on configuration parameters and values, see <a class="reference external" href="https://docs-a1.readthedocs.io/en/latest/unit_configuration.html">Unit Configurations</a>.</p>
</section>
<section id="apveh-messages">
<h3>4.2 APVEH Messages<a class="headerlink" href="#apveh-messages" title="Link to this heading"></a></h3>
<p>The easiest way to set ANELLO vehicle configurations is using the <a class="reference external" href="https://docs-a1.readthedocs.io/en/latest/python_tool.html#vehicle-configurations">ANELLO Python Program</a>,
which saves all changes to non-volatile flash memory.</p>
<p>Alternatively, the unit can be configured using the APVEH message, which allows for both temporary (RAM) and permanent setting (FLASH) of configuration parameters.</p>
<p><strong>#APVEH,&lt;r/w/R/W&gt;,&lt;param1&gt;,&lt;value1&gt;,…,&lt;paramN&gt;,&lt;valueN&gt;*checksum</strong></p>
<blockquote>
<div><table class="docutils align-default">
<tbody>
<tr class="row-odd"><td></td>
<td><p>Field</p></td>
<td><p>Description</p></td>
</tr>
<tr class="row-even"><td><p>0</p></td>
<td><p>APVEH</p></td>
<td><p>Sentence identifier</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>&lt;read/write&gt;</p></td>
<td><p>‘r’: read  RAM, ‘w’: write RAM, ‘R’: read FLASH, ‘W’: write FLASH</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>&lt;param&gt;</p></td>
<td><p>Configuration parameter (APVEH code)</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>&lt;value&gt;</p></td>
<td><p>Configuration value, expressed in ASCII</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>checksum</p></td>
<td><p>XOR of bytes between # and * written in hexadecimal (letters must be uppercase)</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
<section id="apodo-message">
<h3>4.3 APODO Message<a class="headerlink" href="#apodo-message" title="Link to this heading"></a></h3>
<p>The ANELLO EVK and GNSS INS accepts odometer input over the configuration port.
The APODO message is in ASCII format and used to convey the vehicle direction and a speed.
A negative value indicates reverse, and a positive value indicates forward. If no direction is indicated, the direction is assumed to be forward.</p>
<p>Direction can also be input without a speed. This can be useful when there is no odometer input available, but transmission position is available.
This is useful to enable INS initialization in both forward and reverse.</p>
<p>When an APODO message is received with a reverse direction indication, the unit will assume the vehicle is in reverse until a packet is received with a forward direction.
The units of the speed in the APODO message is user configurable to m/s (default), mile/hr, km/hr, ft/s
(see ‘odo’ code in <a class="reference external" href="https://docs-a1.readthedocs.io/en/latest/unit_configuration.html">Unit Configurations</a>).</p>
<p><strong>#APODO,&lt;dir&gt;,&lt;speed&gt;*checksum</strong></p>
<blockquote>
<div><table class="docutils align-default">
<tbody>
<tr class="row-odd"><td></td>
<td><p>Field</p></td>
<td><p>Description</p></td>
</tr>
<tr class="row-even"><td><p>0</p></td>
<td><p>APODO</p></td>
<td><p>Sentence identifier</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>&lt;dir&gt;</p></td>
<td><p>‘-’: reverse, ‘+’: forward (optional)</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>&lt;speed&gt;</p></td>
<td><p>Speed is a floating point value, units are set in unit configurations</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>checksum</p></td>
<td><p>XOR of bytes between # and * written in hexadecimal (letters must be uppercase)</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>For example, the following would all be interpreted as moving in reverse with a speed of 24:
#APODO,-,24*7E
#APODO,-24*52
#APODO,-,-24*53</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If sending odometer speeds by UDP from another program, send to UDP port 3 on the EVK, from the computer’s UDP port matching “odometer port” configuration.</p>
</div>
</section>
<section id="rtcm-data-input">
<h3>4.4 RTCM Data Input<a class="headerlink" href="#rtcm-data-input" title="Link to this heading"></a></h3>
<p>Standard RTCM messages can be forwarded to the data port of the ANELLO EVK and GNSS INS to enable the GNSS receivers to reach RTK precision.
Standard RTCM3.3 in MSM format, including MSM4, MSM5, and MSM7 messages, are supported.
The ANELLO Python Program provides an NTRIP client which can connect to a standard NTRIP network and forward the RTCM messages to the ANELLO unit.</p>
</section>
<section id="ping-command">
<h3>4.5 Ping Command<a class="headerlink" href="#ping-command" title="Link to this heading"></a></h3>
<p>The Ping command can be used to test if the serial port is properly configured.</p>
<p>#APPNG*48</p>
<p>A correctly received ping command generates a response from the unit of:</p>
<p>#APPNG,0*54</p>
</section>
<section id="echo-command">
<h3>4.6 Echo Command<a class="headerlink" href="#echo-command" title="Link to this heading"></a></h3>
<p>The Echo command serves as an additional communication test for the serial port configuration as well as the checksum generator. For example:</p>
<p>#APECH,Echo! echo… ech… e…*77</p>
<p>A correctly received Echo command generates an identical response from the unit:</p>
<p>#APECH,Echo! echo… ech… e…*77.</p>
</section>
<section id="reset-command">
<h3>4.7 Reset Command<a class="headerlink" href="#reset-command" title="Link to this heading"></a></h3>
<p>The reset command allows the user to reset the system, e.g. after changing a configuration setting that requires a power cycle.
No response message is generated; however, the system will reset causing the system output to be suspended briefly.</p>
<p>#APRST,0*58</p>
</section>
</section>
<section id="error-messages">
<h2>5  Error Messages<a class="headerlink" href="#error-messages" title="Link to this heading"></a></h2>
<p>If an incorrect command is sent to the unit, it responds with one of ten error responses. The error message format is:</p>
<p>#APERR,&lt;error code&gt;*CS</p>
<p>The following table lists the error code along with the corresponding description.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Error Code</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>No start character (#)</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>Read/Write indicator missing (from #APCFG
or #APVEH)</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>Incomplete message (checksum missing)</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>Incorrect checksum</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>Invalid preamble (AP)</p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>Invalid message type</p></td>
</tr>
<tr class="row-even"><td><p>7</p></td>
<td><p>Invalid field</p></td>
</tr>
<tr class="row-odd"><td><p>8</p></td>
<td><p>Invalid value</p></td>
</tr>
<tr class="row-even"><td><p>9</p></td>
<td><p>Flash locked</p></td>
</tr>
<tr class="row-odd"><td><p>10</p></td>
<td><p>Unexpected character (applies to APPID,
APSTA, APVER, APSER, APFSN, and APFHW)</p></td>
</tr>
<tr class="row-even"><td><p>11</p></td>
<td><p>Disabled command (applies to APODO)</p></td>
</tr>
</tbody>
</table>
</section>
<section id="checksum">
<h2>6  Checksum<a class="headerlink" href="#checksum" title="Link to this heading"></a></h2>
<section id="ascii-checksum">
<h3>6.1 Ascii Checksum<a class="headerlink" href="#ascii-checksum" title="Link to this heading"></a></h3>
<p>The ASCII checksum is an XOR of all characters between the start character ‘#’ and the checksum indicator ‘*’. The following python code snippet can be used to generate the correct checksum.</p>
<blockquote>
<div><ul class="simple">
<li><p>Specify the input message (generates the string: #APCFG,W,odr,2,msg,IMU*4B)</p></li>
<li><p>Generate the checksum for the inertial product input message</p></li>
<li><p>Print the complete message (starting field and checksum) to the screen</p></li>
</ul>
</div></blockquote>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">msg</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">(</span><span class="n">APCFG</span><span class="p">,</span><span class="n">W</span><span class="p">,</span><span class="n">odr</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">msg</span><span class="p">,</span><span class="n">IMU</span><span class="p">)</span>
<span class="n">checksum</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">msg</span><span class="p">:</span>
  <span class="n">checksum</span> <span class="o">=</span> <span class="n">checksum</span> <span class="o">^</span> <span class="nb">int</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="c1">#%s*%02X % (msg.decode(), checksum))</span>
</pre></div>
</div>
</section>
<section id="binary-checksum">
<h3>6.2 Binary Checksum<a class="headerlink" href="#binary-checksum" title="Link to this heading"></a></h3>
<dl>
<dt>GNSS / INS, EVK, IMU / IMU+:</dt><dd><p>The checksum definition can be found <a class="reference external" href="https://github.com/Anello-Photonics/decoder/blob/master/artcm/artcm.c">here</a>.</p>
</dd>
<dt>X3:</dt><dd><p>The 2 preamble bytes and the checksum itself are not included in the checksum calculation.
Checksum is calculated as follows, where N is the number of bytes included in the checksum calculation:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">CK_A</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">CK_B</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="p">(</span><span class="n">I</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">I</span> <span class="o">&lt;</span> <span class="n">N</span><span class="p">;</span> <span class="n">I</span><span class="o">++</span><span class="p">)</span>
<span class="p">{</span>
<span class="n">CK_A</span> <span class="o">=</span> <span class="n">CK_A</span> <span class="o">+</span> <span class="n">Buffer</span><span class="p">[</span><span class="n">I</span><span class="p">]</span>
<span class="n">CK_B</span> <span class="o">=</span> <span class="n">CK_B</span> <span class="o">+</span> <span class="n">CK_A</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="vehicle_configuration.html" class="btn btn-neutral float-left" title="Vehicle Configuration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="mechanicals.html" class="btn btn-neutral float-right" title="Mechanicals" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Anello Photonics, Inc.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>